#include <8051.h>

void main() {
    unsigned char i; // 8-битная переменная для итерации
    unsigned char massiv[11] = {
        0xC0, // 0
        0xF9, // 1
        0xA4, // 2
        0xB0, // 3
        0x99, // 4
        0x92, // 5
        0x82, // 6
        0xF8, // 7
        0x80, // 8
        0x90, // 9
        0xFF  // код выключения
    };
    
    P1 = massiv[10]; // сначала выключим индикатор

    while (1) {
        if (P3_1 == 0) { // проверяем состояние кнопки (нажата)
            for (i = 0; i < 10; i += 3) { // выводим коды с шагом 3
                P2 = massiv[i]; // коды от 0 до 9 с шагом 3
                for (unsigned char j = 0; j < 100; j++); // временная задержка для устойчивого горения каждой цифры
            }
            P2 = massiv[10]; // выключить индикатор после отображения
        }
    }
}
